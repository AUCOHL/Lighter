
read_verilog designs/TDI_AHB/TDI_AHB6.v
read_verilog lib/blackbox_clk_gates.v
hierarchy -check -top TDI_AHB

proc;
opt;; 
memory_collect
memory_map
opt;;
check
techmap -map lib/map_file.v
opt;; 
opt_clean -purge
synth -top TDI_AHB
dfflibmap -liberty lib/sky130_hd.lib 
abc -D 1250 -liberty lib/sky130_hd.lib 
splitnets
opt_clean -purge
hilomap -hicell sky130_fd_sc_hd__conb_1 HI -locell sky130_fd_sc_hd__conb_1 LO
splitnets
opt_clean -purge
insbuf -buf sky130_fd_sc_hd__buf_2 A X
dffinit
opt;; 
check
write_verilog -noattr -noexpr -nohex -nodec -defparam   designs/TDI_AHB/after_gl.v
            